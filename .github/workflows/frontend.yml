name: Cypress Tests

on: [push]

jobs:
  install:
    runs-on: ubuntu-latest
    container:
      image: cypress/browsers:node16.13.0-chrome95-ff94
      options: --user 1001
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Cypress install
        uses: cypress-io/github-action@v4
        working-directory: "/frontend"
        with:
          runTests: false
        # report machine parameters
        run: |
          yarn cypress info
          node --version
          node -p 'os.cpus()'
          yarn types
          yarn lint
          yarn test:unit:ci
          yarn build:ci
